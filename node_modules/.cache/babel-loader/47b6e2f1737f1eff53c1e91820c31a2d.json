{"ast":null,"code":"import { Redirect } from \"react-router\";\nimport { auth, provider } from \"../Firebase\";\nimport { SET_USER } from \"./ActionType\";\nexport const setUser = payload => ({\n  type: SET_USER,\n  user: payload\n});\nexport function signInAPI() {\n  return dispatch => {\n    auth.signInWithPopup(provider).then(payload => {\n      dispatch(setUser(payload.user));\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}\nexport function getUserAuth() {\n  return dispatch => {\n    auth.onAuthStateChanged(async user => {\n      if (user) {\n        dispatch(setUser(user));\n      }\n    });\n  };\n}\nexport function signOutAPI() {\n  return dispatch => {\n    auth.signOut().then(() => {\n      dispatch(setUser(null));\n    }).catch(error => console.log(error.message));\n  };\n}\nexport function postArticleAPI(payload) {\n  return dispatch => {\n    if (payload.image != \"\") {\n      const upload = storage.ref(`images/${payload.image.name}`).put(payload.image);\n      upload.on(\"state_changed\", snapshot => {\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log(`Progress: ${progress}%`);\n\n        if (snapshot.state === \"RUNNING\") {\n          console.log(`Progress: $(progress)%`);\n        }\n      }, error => console.log(error.code));\n    }\n  };\n}","map":{"version":3,"sources":["/Users/jibrilmohamed/Documents/reactJS/linkedin-clone/src/action/index.js"],"names":["Redirect","auth","provider","SET_USER","setUser","payload","type","user","signInAPI","dispatch","signInWithPopup","then","catch","error","console","log","getUserAuth","onAuthStateChanged","signOutAPI","signOut","message","postArticleAPI","image","upload","storage","ref","name","put","on","snapshot","progress","bytesTransferred","totalBytes","state","code"],"mappings":"AAAA,SAASA,QAAT,QAAyB,cAAzB;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,aAA/B;AACA,SAASC,QAAT,QAAyB,cAAzB;AAEA,OAAO,MAAMC,OAAO,GAAIC,OAAD,KAAc;AACnCC,EAAAA,IAAI,EAAEH,QAD6B;AAEnCI,EAAAA,IAAI,EAAEF;AAF6B,CAAd,CAAhB;AAKP,OAAO,SAASG,SAAT,GAAqB;AAC1B,SAAQC,QAAD,IAAc;AACnBR,IAAAA,IAAI,CACDS,eADH,CACmBR,QADnB,EAEGS,IAFH,CAESN,OAAD,IAAa;AACjBI,MAAAA,QAAQ,CAACL,OAAO,CAACC,OAAO,CAACE,IAAT,CAAR,CAAR;AACD,KAJH,EAKGK,KALH,CAKUC,KAAD,IAAW;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,KAPH;AAQD,GATD;AAUD;AAED,OAAO,SAASG,WAAT,GAAuB;AAC5B,SAAQP,QAAD,IAAc;AACnBR,IAAAA,IAAI,CAACgB,kBAAL,CAAwB,MAAOV,IAAP,IAAgB;AACtC,UAAIA,IAAJ,EAAU;AACRE,QAAAA,QAAQ,CAACL,OAAO,CAACG,IAAD,CAAR,CAAR;AACD;AACF,KAJD;AAKD,GAND;AAOD;AAED,OAAO,SAASW,UAAT,GAAsB;AAC3B,SAAQT,QAAD,IAAc;AACnBR,IAAAA,IAAI,CACDkB,OADH,GAEGR,IAFH,CAEQ,MAAM;AACVF,MAAAA,QAAQ,CAACL,OAAO,CAAC,IAAD,CAAR,CAAR;AACD,KAJH,EAKGQ,KALH,CAKUC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACO,OAAlB,CALpB;AAMD,GAPD;AAQD;AAED,OAAO,SAASC,cAAT,CAAwBhB,OAAxB,EAAiC;AACtC,SAAQI,QAAD,IAAc;AACnB,QAAIJ,OAAO,CAACiB,KAAR,IAAiB,EAArB,EAAyB;AACvB,YAAMC,MAAM,GAAGC,OAAO,CACnBC,GADY,CACP,UAASpB,OAAO,CAACiB,KAAR,CAAcI,IAAK,EADrB,EAEZC,GAFY,CAERtB,OAAO,CAACiB,KAFA,CAAf;AAGAC,MAAAA,MAAM,CAACK,EAAP,CACE,eADF,EAEGC,QAAD,IAAc;AACZ,cAAMC,QAAQ,GACXD,QAAQ,CAACE,gBAAT,GAA4BF,QAAQ,CAACG,UAAtC,GAAoD,GADtD;AAEAlB,QAAAA,OAAO,CAACC,GAAR,CAAa,aAAYe,QAAS,GAAlC;;AACA,YAAID,QAAQ,CAACI,KAAT,KAAmB,SAAvB,EAAkC;AAChCnB,UAAAA,OAAO,CAACC,GAAR,CAAa,wBAAb;AACD;AACF,OATH,EAUGF,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACqB,IAAlB,CAVb;AAYD;AACF,GAlBD;AAmBD","sourcesContent":["import { Redirect } from \"react-router\";\nimport { auth, provider } from \"../Firebase\";\nimport { SET_USER } from \"./ActionType\";\n\nexport const setUser = (payload) => ({\n  type: SET_USER,\n  user: payload,\n});\n\nexport function signInAPI() {\n  return (dispatch) => {\n    auth\n      .signInWithPopup(provider)\n      .then((payload) => {\n        dispatch(setUser(payload.user));\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n}\n\nexport function getUserAuth() {\n  return (dispatch) => {\n    auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        dispatch(setUser(user));\n      }\n    });\n  };\n}\n\nexport function signOutAPI() {\n  return (dispatch) => {\n    auth\n      .signOut()\n      .then(() => {\n        dispatch(setUser(null));\n      })\n      .catch((error) => console.log(error.message));\n  };\n}\n\nexport function postArticleAPI(payload) {\n  return (dispatch) => {\n    if (payload.image != \"\") {\n      const upload = storage\n        .ref(`images/${payload.image.name}`)\n        .put(payload.image);\n      upload.on(\n        \"state_changed\",\n        (snapshot) => {\n          const progress =\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n          console.log(`Progress: ${progress}%`);\n          if (snapshot.state === \"RUNNING\") {\n            console.log(`Progress: $(progress)%`);\n          }\n        },\n        (error) => console.log(error.code)\n      );\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}