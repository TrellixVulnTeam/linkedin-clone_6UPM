{"ast":null,"code":"import { Redirect } from \"react-router\";\nimport { auth, provider, storage } from \"../Firebase\";\nimport db from \"../Firebase\";\nimport { SET_LOADING_STATUS, SET_USER, GET_ARTICLES } from \"./ActionType\";\nexport const setUser = payload => ({\n  type: SET_USER,\n  user: payload\n});\nexport const setLoading = status => ({\n  type: SET_LOADING_STATUS,\n  status: status\n});\nexport const getArticles = payload => ({\n  type: GET_ARTICLES,\n  payload: payload\n});\nexport function signInAPI() {\n  return dispatch => {\n    auth.signInWithPopup(provider).then(payload => {\n      dispatch(setUser(payload.user));\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}\nexport function getUserAuth() {\n  return dispatch => {\n    auth.onAuthStateChanged(async user => {\n      if (user) {\n        dispatch(setUser(user));\n      }\n    });\n  };\n}\nexport function signOutAPI() {\n  return dispatch => {\n    auth.signOut().then(() => {\n      dispatch(setUser(null));\n    }).catch(error => console.log(error.message));\n  };\n}\nexport function postArticleAPI(payload) {\n  return dispatch => {\n    dispatch(setLoading(true));\n\n    if (payload.image != \"\") {\n      const upload = storage.ref(`images/${payload.image.name}`).put(payload.image);\n      upload.on(\"state_changed\", snapshot => {\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log(`Progress: ${progress}%`);\n\n        if (snapshot.state === \"RUNNING\") {\n          console.log(`Progress: ${progress}%`);\n        }\n      }, error => console.log(error.code), async () => {\n        const downloadURL = await upload.snapshot.ref.getDownloadURL();\n        db.collection(\"articles\").add({\n          actor: {\n            description: payload.user.email,\n            title: payload.user.displayName,\n            date: payload.timestamp,\n            image: payload.user.photoURL\n          },\n          video: payload.video,\n          sharedImg: downloadURL,\n          comments: 0,\n          description: payload.description\n        });\n        dispatch(setLoading(false));\n      });\n    } else if (payload.video) {\n      db.collection(\"articles\").add({\n        actor: {\n          description: payload.user.email,\n          title: payload.user.displayName,\n          date: payload.timestamp,\n          image: payload.user.photoURL\n        },\n        video: payload.video,\n        sharedImg: \"\",\n        comments: 0,\n        description: payload.description\n      });\n      dispatch(setLoading(false));\n    }\n  };\n}\nexport function getArticlesAPI() {\n  return dispatch => {\n    let payload;\n    db.collection(\"articles\").orderBy(\"actor.date\", \"desc\").onSnapshot(snapshot => {\n      payload = snapshot.docs.map(doc => doc.data());\n      dispatch(getArticle(payload));\n    });\n  };\n}","map":{"version":3,"sources":["/Users/jibrilmohamed/Documents/reactJS/linkedin-clone/src/action/index.js"],"names":["Redirect","auth","provider","storage","db","SET_LOADING_STATUS","SET_USER","GET_ARTICLES","setUser","payload","type","user","setLoading","status","getArticles","signInAPI","dispatch","signInWithPopup","then","catch","error","console","log","getUserAuth","onAuthStateChanged","signOutAPI","signOut","message","postArticleAPI","image","upload","ref","name","put","on","snapshot","progress","bytesTransferred","totalBytes","state","code","downloadURL","getDownloadURL","collection","add","actor","description","email","title","displayName","date","timestamp","photoURL","video","sharedImg","comments","getArticlesAPI","orderBy","onSnapshot","docs","map","doc","data","getArticle"],"mappings":"AAAA,SAASA,QAAT,QAAyB,cAAzB;AACA,SAASC,IAAT,EAAeC,QAAf,EAAyBC,OAAzB,QAAwC,aAAxC;AACA,OAAOC,EAAP,MAAe,aAAf;AACA,SAASC,kBAAT,EAA6BC,QAA7B,EAAuCC,YAAvC,QAA2D,cAA3D;AAEA,OAAO,MAAMC,OAAO,GAAIC,OAAD,KAAc;AACnCC,EAAAA,IAAI,EAAEJ,QAD6B;AAEnCK,EAAAA,IAAI,EAAEF;AAF6B,CAAd,CAAhB;AAIP,OAAO,MAAMG,UAAU,GAAIC,MAAD,KAAa;AACrCH,EAAAA,IAAI,EAAEL,kBAD+B;AAErCQ,EAAAA,MAAM,EAAEA;AAF6B,CAAb,CAAnB;AAIP,OAAO,MAAMC,WAAW,GAAIL,OAAD,KAAc;AACvCC,EAAAA,IAAI,EAAEH,YADiC;AAEvCE,EAAAA,OAAO,EAAEA;AAF8B,CAAd,CAApB;AAIP,OAAO,SAASM,SAAT,GAAqB;AAC1B,SAAQC,QAAD,IAAc;AACnBf,IAAAA,IAAI,CACDgB,eADH,CACmBf,QADnB,EAEGgB,IAFH,CAEST,OAAD,IAAa;AACjBO,MAAAA,QAAQ,CAACR,OAAO,CAACC,OAAO,CAACE,IAAT,CAAR,CAAR;AACD,KAJH,EAKGQ,KALH,CAKUC,KAAD,IAAW;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,KAPH;AAQD,GATD;AAUD;AAED,OAAO,SAASG,WAAT,GAAuB;AAC5B,SAAQP,QAAD,IAAc;AACnBf,IAAAA,IAAI,CAACuB,kBAAL,CAAwB,MAAOb,IAAP,IAAgB;AACtC,UAAIA,IAAJ,EAAU;AACRK,QAAAA,QAAQ,CAACR,OAAO,CAACG,IAAD,CAAR,CAAR;AACD;AACF,KAJD;AAKD,GAND;AAOD;AAED,OAAO,SAASc,UAAT,GAAsB;AAC3B,SAAQT,QAAD,IAAc;AACnBf,IAAAA,IAAI,CACDyB,OADH,GAEGR,IAFH,CAEQ,MAAM;AACVF,MAAAA,QAAQ,CAACR,OAAO,CAAC,IAAD,CAAR,CAAR;AACD,KAJH,EAKGW,KALH,CAKUC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACO,OAAlB,CALpB;AAMD,GAPD;AAQD;AAED,OAAO,SAASC,cAAT,CAAwBnB,OAAxB,EAAiC;AACtC,SAAQO,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAACJ,UAAU,CAAC,IAAD,CAAX,CAAR;;AACA,QAAIH,OAAO,CAACoB,KAAR,IAAiB,EAArB,EAAyB;AACvB,YAAMC,MAAM,GAAG3B,OAAO,CACnB4B,GADY,CACP,UAAStB,OAAO,CAACoB,KAAR,CAAcG,IAAK,EADrB,EAEZC,GAFY,CAERxB,OAAO,CAACoB,KAFA,CAAf;AAGAC,MAAAA,MAAM,CAACI,EAAP,CACE,eADF,EAEGC,QAAD,IAAc;AACZ,cAAMC,QAAQ,GACXD,QAAQ,CAACE,gBAAT,GAA4BF,QAAQ,CAACG,UAAtC,GAAoD,GADtD;AAEAjB,QAAAA,OAAO,CAACC,GAAR,CAAa,aAAYc,QAAS,GAAlC;;AACA,YAAID,QAAQ,CAACI,KAAT,KAAmB,SAAvB,EAAkC;AAChClB,UAAAA,OAAO,CAACC,GAAR,CAAa,aAAYc,QAAS,GAAlC;AACD;AACF,OATH,EAUGhB,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACoB,IAAlB,CAVb,EAWE,YAAY;AACV,cAAMC,WAAW,GAAG,MAAMX,MAAM,CAACK,QAAP,CAAgBJ,GAAhB,CAAoBW,cAApB,EAA1B;AACAtC,QAAAA,EAAE,CAACuC,UAAH,CAAc,UAAd,EAA0BC,GAA1B,CAA8B;AAC5BC,UAAAA,KAAK,EAAE;AACLC,YAAAA,WAAW,EAAErC,OAAO,CAACE,IAAR,CAAaoC,KADrB;AAELC,YAAAA,KAAK,EAAEvC,OAAO,CAACE,IAAR,CAAasC,WAFf;AAGLC,YAAAA,IAAI,EAAEzC,OAAO,CAAC0C,SAHT;AAILtB,YAAAA,KAAK,EAAEpB,OAAO,CAACE,IAAR,CAAayC;AAJf,WADqB;AAO5BC,UAAAA,KAAK,EAAE5C,OAAO,CAAC4C,KAPa;AAQ5BC,UAAAA,SAAS,EAAEb,WARiB;AAS5Bc,UAAAA,QAAQ,EAAE,CATkB;AAU5BT,UAAAA,WAAW,EAAErC,OAAO,CAACqC;AAVO,SAA9B;AAYA9B,QAAAA,QAAQ,CAACJ,UAAU,CAAC,KAAD,CAAX,CAAR;AACD,OA1BH;AA4BD,KAhCD,MAgCO,IAAIH,OAAO,CAAC4C,KAAZ,EAAmB;AACxBjD,MAAAA,EAAE,CAACuC,UAAH,CAAc,UAAd,EAA0BC,GAA1B,CAA8B;AAC5BC,QAAAA,KAAK,EAAE;AACLC,UAAAA,WAAW,EAAErC,OAAO,CAACE,IAAR,CAAaoC,KADrB;AAELC,UAAAA,KAAK,EAAEvC,OAAO,CAACE,IAAR,CAAasC,WAFf;AAGLC,UAAAA,IAAI,EAAEzC,OAAO,CAAC0C,SAHT;AAILtB,UAAAA,KAAK,EAAEpB,OAAO,CAACE,IAAR,CAAayC;AAJf,SADqB;AAO5BC,QAAAA,KAAK,EAAE5C,OAAO,CAAC4C,KAPa;AAQ5BC,QAAAA,SAAS,EAAE,EARiB;AAS5BC,QAAAA,QAAQ,EAAE,CATkB;AAU5BT,QAAAA,WAAW,EAAErC,OAAO,CAACqC;AAVO,OAA9B;AAYA9B,MAAAA,QAAQ,CAACJ,UAAU,CAAC,KAAD,CAAX,CAAR;AACD;AACF,GAjDD;AAkDD;AAED,OAAO,SAAS4C,cAAT,GAA0B;AAC/B,SAAQxC,QAAD,IAAc;AACnB,QAAIP,OAAJ;AACAL,IAAAA,EAAE,CAACuC,UAAH,CAAc,UAAd,EACGc,OADH,CACW,YADX,EACyB,MADzB,EAEGC,UAFH,CAEevB,QAAD,IAAc;AACxB1B,MAAAA,OAAO,GAAG0B,QAAQ,CAACwB,IAAT,CAAcC,GAAd,CAAmBC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAA3B,CAAV;AACA9C,MAAAA,QAAQ,CAAC+C,UAAU,CAACtD,OAAD,CAAX,CAAR;AACD,KALH;AAMD,GARD;AASD","sourcesContent":["import { Redirect } from \"react-router\";\nimport { auth, provider, storage } from \"../Firebase\";\nimport db from \"../Firebase\";\nimport { SET_LOADING_STATUS, SET_USER, GET_ARTICLES } from \"./ActionType\";\n\nexport const setUser = (payload) => ({\n  type: SET_USER,\n  user: payload,\n});\nexport const setLoading = (status) => ({\n  type: SET_LOADING_STATUS,\n  status: status,\n});\nexport const getArticles = (payload) => ({\n  type: GET_ARTICLES,\n  payload: payload,\n});\nexport function signInAPI() {\n  return (dispatch) => {\n    auth\n      .signInWithPopup(provider)\n      .then((payload) => {\n        dispatch(setUser(payload.user));\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n}\n\nexport function getUserAuth() {\n  return (dispatch) => {\n    auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        dispatch(setUser(user));\n      }\n    });\n  };\n}\n\nexport function signOutAPI() {\n  return (dispatch) => {\n    auth\n      .signOut()\n      .then(() => {\n        dispatch(setUser(null));\n      })\n      .catch((error) => console.log(error.message));\n  };\n}\n\nexport function postArticleAPI(payload) {\n  return (dispatch) => {\n    dispatch(setLoading(true));\n    if (payload.image != \"\") {\n      const upload = storage\n        .ref(`images/${payload.image.name}`)\n        .put(payload.image);\n      upload.on(\n        \"state_changed\",\n        (snapshot) => {\n          const progress =\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n          console.log(`Progress: ${progress}%`);\n          if (snapshot.state === \"RUNNING\") {\n            console.log(`Progress: ${progress}%`);\n          }\n        },\n        (error) => console.log(error.code),\n        async () => {\n          const downloadURL = await upload.snapshot.ref.getDownloadURL();\n          db.collection(\"articles\").add({\n            actor: {\n              description: payload.user.email,\n              title: payload.user.displayName,\n              date: payload.timestamp,\n              image: payload.user.photoURL,\n            },\n            video: payload.video,\n            sharedImg: downloadURL,\n            comments: 0,\n            description: payload.description,\n          });\n          dispatch(setLoading(false));\n        }\n      );\n    } else if (payload.video) {\n      db.collection(\"articles\").add({\n        actor: {\n          description: payload.user.email,\n          title: payload.user.displayName,\n          date: payload.timestamp,\n          image: payload.user.photoURL,\n        },\n        video: payload.video,\n        sharedImg: \"\",\n        comments: 0,\n        description: payload.description,\n      });\n      dispatch(setLoading(false));\n    }\n  };\n}\n\nexport function getArticlesAPI() {\n  return (dispatch) => {\n    let payload;\n    db.collection(\"articles\")\n      .orderBy(\"actor.date\", \"desc\")\n      .onSnapshot((snapshot) => {\n        payload = snapshot.docs.map((doc) => doc.data());\n        dispatch(getArticle(payload));\n      });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}